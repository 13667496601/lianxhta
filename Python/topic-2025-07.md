
# B859：cdist-如何估计反事实的分布特征？

介绍 `cdist` 命令的理论基础和应用。 
```stata
ssc install cdist, replace 
ssc install moremata, replace  // 需要利用该程序包提供的函数
net get cdist.pkg, replace //作者提供的辅助资料
```

`cdist` estimates counterfactual distributions using methods suggested by Chernozhukov et al. (2013). The unconditional (counterfactual) distributions are either obtained by distribution regression using `logit` models or by a linear quantile regression process (using `mm_qr()` from the `moremata` package).

For an alternative implementation of these (and related) methods see package [counterfactual](https://raw.githubusercontent.com/bmelly/Stata/main/) by Blaise Melly (type the following command:
```stata
net from https://raw.githubusercontent.com/bmelly/Stata/main/
```
the package also includes commands `cdeco` and `cdeco_jmp` to perform counterfactual decompositions).

## References

- Chernozhukov, Victor, Iván Fernández-Val, Blaise Melly. 2013. Inference on Counterfactual Distributions. Econometrica 81(6):2205–2268.
- Chernozhukov, Victor, Iván Fernández-Val, Blaise Melly. 2022. Fast algorithms for the quantile regression process. Empirical Economics 62(1):7–33.
- Juhn, Chinhui, Kevin M. Murphy, Brooks Pierce. 1993. Wage Inequality and the Rise in Returns to Skill. Journal of Political Economy 101(3):410-442.
- Portnoy, Stephen, Roger Koenker. 1997. The Gaussian hare and the Laplacian tortoise: computability of squared-error versus absolute-error estimators. Statistical Science 12(4):279-300.


# B858：数据量大时，啥啥都显著

翻译，并适当的调整或添加内容。一定要写出完整的参考资料出处，以免引起版权纠纷。推文的题目可以根据你的理解来拟定，最好能有一定的吸引力。

- Dave Giles, 2019, Blog, [Everything's Significant When You Have Lots of Data](https://davegiles.blogspot.com/2019/10/everythings-significant-when-you-have.html#more)


# B857：介绍 Local-DID 模型

> [github-lpdid](https://github.com/friosavila/lpdid)

- Markdown 文档生成建议：
  - 复制网页内容 &rarr; 贴入 Typora 编辑器，按 **Ctrl+/** 即可呈现 Markdown 文本。
  - 数学公式：可以用 [simpletex](https://simpletex.cn/) 软件扫描获取。

## 简介 LP-DiD

- Dube, A., D. Girardi, O. Jorda, A. M. Taylor, **2023**, A local projections approach to difference-in-differences event studies. [PDF](https://www.frbsf.org/wp-content/uploads/sites/4/wp2023-12.pdf), [Replication](https://github.com/danielegirardi/lpdid), [-cited-](https://scholar.google.com/scholar?cites=2002525239519188943&as_sdt=2005&sciodt=0,5&hl=zh-CN)

Dube, Girardi, Jorda' and Taylor (2023) propose a local projections approach to difference-in-differences event studies - LP-DiD.

This repository contains two STATA do files that implement the LP-DiD estimator in simulated datasets. 

Both examples illustrate the case of binary, staggered and absorbing treatment, when only not yet treated units are used as controls. 

- `LP_DiD_examplefile.do` uses a simulated dataset similar to the Montecarlo simulations presented in Dube, Girardi, Jorda' and Taylor (2023). 

- `lpdid_test.do` applies LP-DiD in a simulated dataset from Borusyak (2021).



# B856：Stata 可视化：robbox-强大的的箱型图命令 - 快速呈现离群值

写一篇推文介绍 `robbox` 命令。帮助文件中提供了大量的例子。

参考文献：
- Jann, B., V. Verardi, C. Vermandele (2019). robbox: Stata module to compute generalized box plots. [-Link-](http://ideas.repec.org/c/boc/bocode/s458620.html)
- Bruffaerts, C., V. Verardi, and C. Vermandele. 2014. A generalized boxplot for skewed and heavy-tailed distributions. Statistics and Probability Letters 95: 110-117.
- Hubert, M., and E. Vandervieren. 2008. An adjusted boxplot for skewed distributions. Computational Statistics and Data Analysis 52: 5186-5201.


# B855：介绍 I4R 机构和网站

- The Institute for Replication (I4R):<https://www.i4replication.org/index.html>

提纲：
1. I4R 简介
2. 论文复现的新趋势：I4R 是如何做的 - 提供模板；大规模复现；设置比赛；与期刊合作进行论文复现
3. 在 [publishing](https://www.i4replication.org/publishing.html) 单元介绍了很多资源
4. 工作论文，每年一百多篇复现性质的论文。有助于我们了解如何做复现类论文；如何通过复现提高自己的研究能力
  - https://ideas.repec.org/s/zbw/i4rdps.html



# B854：知乎热议：为什么国内博士毕业的 paper 普遍比国外博士多？

[为什么我感觉国内博士毕业手里的 paper 普遍比国外博士多？](https://www.zhihu.com/question/457963341)

参考连享会往期知乎热议专题推文的写法：Stata 命令 `lianxh 知乎`

- [知乎热议：读经济学博士（PhD）的感受如何](https://www.lianxh.cn/news/18c08522e5ea3.html)
- [知乎热议：学经济学以后能干什么？](https://www.lianxh.cn/news/b2ff2752d4f6e.html)
- [知乎热议：做学术需要搞清楚计量经济学里全部的数学原理吗？](https://www.lianxh.cn/news/f8b0dbe406fcc.html)
- [知乎热议：对 PhD 一年级新生有什么建议？](https://www.lianxh.cn/news/da7f1c2b5cda5.html)
- [知乎热议：你见过最烂的代码长什么样子？](https://www.lianxh.cn/news/c825de3f13fad.html)
- [知乎热议：发 Top 5 和 Field Top 是什么感觉？](https://www.lianxh.cn/news/f7dd39f31a14a.html)
- [知乎热议：怎样查全一个方向的文献？](https://www.lianxh.cn/news/30dfd5590a695.html)
- [知乎热议：如何搜到专业数据和行业报告](https://www.lianxh.cn/news/bf317876816f1.html)


# B852：mmqreg: quantile regressions via Method of Moments

> Method of Moments Quantile Regression (MMQR) with fixed effects

`mmqreg` estimates quantile regressions using the method of moments as described in Machado and Santos Silva (2019, **JoE**), and expanding the methodology to allow for multiple fixed effects.

In contrast with `xtqreg`, `mmqreg` adds three features to the estimation of this type of models:
1. It allows the estimation of the Location-Scale quantile regressions when there are no fixed effects.
2. Using the command `hdfe` it allows the estimation of LS quantile regression absorbing multiple fix effects
3. It reports the estimation of various quantiles jointly, which facilitates testing of coefficients across quantiles, using **resampling methods** like Bootstrap. (see bootstrap), or based on analytical standard errors.

Also, in contrast with `xtqreg`, standard errors for quantiles, location, and scale effects, can be estimated adjusting for the degrees of freedom.

Furthermore, because this is a GMM estimator, `mmqreg` also provides 3 options for standard errors, the default which is the same as `xtqreg`, robust standard errors, and clustered standard errors.

- 参考资料
- Machado, J.A.F. and Santos Silva, J.M.C. (2019), Quantiles via Moments, Journal of Econometrics, 213(1), pp. 145-173.
- Rios-Avila, Fernando (2020), Extending Quantile regressions via Method of Moments using multiple fixed effects. MIMEO
 
## 安装
```stata
. ssc install hdfe, replace 
. ssc install ftools, replace 

. ssc install mmqreg, replace 
. net get mmqreg.pkg, replace  // 作者提供的范例数据
```

# B851：翻译：异方差稳健性标准误：实操建议

Enrique Pinzon, 2022, Heteroskedasticity robust standard errors: Some practical considerations. [-Link-](https://blog.stata.com/2022/10/06/heteroskedasticity-robust-standard-errors-some-practical-considerations/)




# B850：金融圈行话暗语大盘点

收集网上的资料，写篇推文。最好能有点趣味，但又不缺少知识性。比如，如下资料可以作为来源的一部分：
- [拒做金融小白，一些“行话”小科普（上）](https://zhuanlan.zhihu.com/p/103692672)
- [金融风控“行话”，一文掌握金融风控专业术语](https://zhuanlan.zhihu.com/p/347740212)
- [金融行业的暗语有哪些？](https://www.zhihu.com/question/65374298)
- [常在金融圈混，不懂点“黑话”怎么行——金融行话盘点](https://zhuanlan.zhihu.com/p/136020595)
- [一审、二审、三审、枪毙](https://www.zhihu.com/question/19635215/answer/135213405)
- [你所知道的行业黑话有哪些？ - 财柒的回答 - 知乎](https://www.zhihu.com/question/19635215/answer/173503200)
- [盘点：科研派“黑话”](https://zhuanlan.zhihu.com/p/64097739)
[有哪些科研圈的通用行话？](https://www.zhihu.com/question/386652986)



# B849-Stata 绘图：violinplot-小提琴图

```stata
net describe http://repec.org/bocode/v/violinplot
ssc install violinplot, replace all 

* violinplot requires dstat, moremata, palettes, and colrspace. 
* To install these packages, type:

  ssc install dstat
  ssc install moremata
  ssc install palettes
  ssc install colrspace
```

作者还提供了一个 zip 文件，执行 `ssc install violinplot, replace all ` 命令后会自动下载到当前工作路径下。可以作为推文的素材。

# B848：MCF: Modified Causal Forest 

- Python: `mcf`, [website](https://mcfpy.github.io/mcf/getting_started.html)
- Bodory H, Mascolo F, Lechner M (2024). **Enabling Decision Making with the Modified Causal Forest: Policy Trees for Treatment Assignment**. *Algorithms*. 17(7):318. [Read Paper](https://doi.org/10.3390/a17070318)


# B847：R语言-aggTrees 包

Di Francesco, R. (2024). Aggregation Trees (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2410.11408) (rep), [PDF](https://arxiv.org/pdf/2410.11408.pdf), [Google](<https://scholar.google.com/scholar?q=Aggregation Trees (Version 1)>).

- R package: `aggTrees`
- website: [Aggregation Trees](https://riccardo-df.github.io/aggTrees/)
  - [教程](https://riccardo-df.github.io/aggTrees/articles/aggTrees-vignette.html)
- `aggTrees` is an R package for *aggregation trees*, a nonparametric approach designed to discover heterogeneous subgroups in a selection-on-observables framework. This method helps researchers assess treatment effect heterogeneity by constructing a hierarchical sequence of optimal groupings, enabling estimation and inference of the group average treatment effects at different levels of granularity.




# B846：论文推介和复现

Baiardi, A., & Naghi, A. A. (2024). The value added of machine learning to causal inference: evidence from revisited studies. The Econometrics Journal, 27(2), 213–234. [Link](https://doi.org/10.1093/ectj/utae004), [PDF](http://sci-hub.ren/10.1093/ectj/utae004), [Google](<https://scholar.google.com/scholar?q=The value added of machine learning to causal inference: evidence from revisited studies>).

# B845：论文推介

Bruns, M., & Piffer, M. (2024). Tractable Bayesian estimation of smooth transition vector autoregressive models. The Econometrics Journal, 27(3), 343–361. [Link](https://doi.org/10.1093/ectj/utae009), [PDF](http://sci-hub.ren/10.1093/ectj/utae009), [Google](<https://scholar.google.com/scholar?q=Tractable Bayesian estimation of smooth transition vector autoregressive models>).

# B844：论文推介

- Arkhangelsky, D., & Imbens, G. (2024). Causal models for longitudinal and panel data: a survey. The Econometrics Journal, 27(3), C1–C61. [Link](https://doi.org/10.1093/ectj/utae014), [PDF](http://sci-hub.ren/10.1093/ectj/utae014), [Google](<https://scholar.google.com/scholar?q=Causal models for longitudinal and panel data: a survey>).

# B843：论文推介

Fuhr, J., & Papies, D. (2024). Double Machine Learning meets Panel Data -- Promises, Pitfalls, and Potential Solutions (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2409.01266) (rep), [PDF](https://arxiv.org/pdf/2409.01266.pdf), [Google](<https://scholar.google.com/scholar?q=Double Machine Learning meets Panel Data -- Promises, Pitfalls, and Potential Solutions (Version 1)>).

# B842：MCMC简介

翻译并适当的调整或添加内容。一定要写出完整的参考资料出处，以免引起版权纠纷。推文的题目可以根据你的理解来拟定，最好能有一定的吸引力。

- [Markov Chain Monte Carlo](https://roomno308.github.io/blog/MCMC.html), [.ipynb](https://github.com/roomno308/roomno308.github.io/blob/main/blog/MCMC.md) (可以 Fork 这个仓库后，下载原始 .ipynb 文件，然后进行意译。注意：图片需要上传到连享会图床中。)


## 其它参考资料
- Brian Keng, 2015, Blog. Markov Chain Monte Carlo Methods, Rejection Sampling and the Metropolis-Hastings Algorithm. [Link](https://bjlkeng.io/posts/markov-chain-monte-carlo-mcmc-and-the-metropolis-hastings-algorithm/), [Source](https://bjlkeng.io/posts/markov-chain-monte-carlo-mcmc-and-the-metropolis-hastings-algorithm/index.ipynb)

- [Understanding the basics of Markov Chain Monte Carlo (MCMC) Methods](https://sarowarahmed.medium.com/understanding-the-basics-of-markov-chain-monte-carlo-mcmc-methods-495c257e9ebc)

- [Wikipedia - Markov chain Monte Carlo](https://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo)
- [Mastering Markov Chain Monte Carlo Methods: A Complete Introduction to MCMC in Machine Learning](https://www.numberanalytics.com/blog/mastering-mcmc-methods)
- [Writing a simple Monte Carlo Markov Chain code](https://carlessanchezalonso.github.io/2020/mcmc/)
- [A Gentle Introduction to Markov Chain Monte Carlo (MCMC)](https://theclevermachine.wordpress.com/2012/11/19/a-gentle-introduction-to-markov-chain-monte-carlo-mcmc/)









# B841：论文推介：机器学习方法比较

- Lechner, M., & Mareckova, J. (2025). Comprehensive Causal Machine Learning (Version 2). arXiv. [Link](https://doi.org/10.48550/arXiv.2405.10198) (rep), [PDF](https://arxiv.org/pdf/2405.10198.pdf), [Google](<https://scholar.google.com/scholar?q=Comprehensive Causal Machine Learning (Version 2)>).

  - Uncovering causal effects in multiple treatment setting at various levels of granularity provides substantial value to decision makers. Comprehensive machine learning approaches to causal effect estimation allow to use a single causal machine learning approach for estimation and inference of causal mean effects for all levels of granularity. Focusing on selection-on-observables, this paper compares three such approaches, the modified causal forest (MCF), the generalized random forest (GRF), and double machine learning (DML). It also compares the theoretical properties of the approaches and provides proven theoretical guarantees for the mcf. The findings indicate that dml-based methods excel for average treatment effects at the population level (ATE) and group level (GATE) with few groups, when selection into treatment is not too strong. However, for finer causal heterogeneity, explicitly outcome-centred forest-based approaches are superior. The mcf has three additional benefits: (i) It is the most robust estimator in cases when dml-based approaches underperform because of substantial selection into treatment; (ii) it is the best estimator for GATEs when the number of groups gets larger; and (iii), it is the only estimator that is internally consistent, in the sense that low-dimensional causal ATEs and GATEs are obtained as aggregates of finer-grained causal parameters.
  - The practical use of these three CCMLs is supported by the availability of well-maintained software packages: $d m l$ is available as Python and R packages, the $g r f$ is available as an $R$ package, and the $m c f$ is available as a Python package.
    - As examples can serve: Bach, Chernozhukov, Kurz, and Spindler (2022), Bach, Kurz, et al. (2024), and Knaus (2022) for dml; Athey and Wager (2019) for grf; and Bodory et al. (2022) for mcf. The R packages can be downloaded from CRAN. The Python packages are available on PyPI.

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)

# B840：论文推介：ML 中介效应

- Lechner M, Bearth N (2025). **Causal Machine Learning for Moderation Effects**. [Read Paper](https://arxiv.org/abs/2401.08290), Journal of Business & Economic Statistics, acceptted
  - Bearth, N., & Lechner, M. (2025). Causal Machine Learning for Moderation Effects. arXiv. [Link](https://doi.org/10.48550/arXiv.2401.08290) (rep), [PDF](https://arxiv.org/pdf/2401.08290.pdf), [Google](<https://scholar.google.com/scholar?q=Causal Machine Learning for Moderation Effects (Version 3)>). Journal of Business & Economic Statistics, forthcoming.

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)

# B839：论文推介：固定效应与混淆变量问题

Burkhardt, J., & Hill, A. E. (2024). Bias Induced by Fixed Effects in the Presence of Collider Variables. [Link](https://doi.org/10.2139/ssrn.5011080), [-PDF-](https://download.ssrn.com/2024/11/5/5011080.pdf?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEBIaCXVzLWVhc3QtMSJIMEYCIQC41XE2oH%2ByrDNbVpCvvMNLSzRbBaTTWId0SQoUiQf41wIhAPCC%2BYunh4AY0CMqr0Gu5F6L41tzADPm7hD8tFf%2F6poLKsUFCPv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMMzA4NDc1MzAxMjU3IgwU6Lu7hdJZxMQ8Cr8qmQXMJkzFzwSJcBncqaaQ9y6CdO5s37n3edqDnSt0II3bs8LpgehsH0%2FFvcNyOQHqg2%2FoBBX9ujjH9juiAZGAouljcfJIDhso4uRjFmo7%2B3NLq9US7q4FXoee95SVIXEGFmR351tniVPjudql1Cz3vw7NpBX4J6%2BqBfHomKcJsKVQ8mfU%2FVoB2592zGuCq6GjIl3AfjvyJZpcnAkwuVojCxiv7A2BUgZSJKFBfIFs6uYVyGP5c7mx09WGXboc1xGV0paZo92%2BfV4FVbC%2BsopOTesxafE%2BXR2Tgu2N9TAmzhB%2BDFS4a7j06Qyetf%2FBOhgiw%2FQh6MqRKsyRkU99JVJscHPUub%2BlaCtFimlyhlTIjPOmahoe6Tc%2BH3S0L3e9gbfkN9faxwtUvRycIsKiP3q0haA40pl8NKfaS1EQZ3OTdF09nRWayQRITk5T3NQhvJv2CidCI5RgOhSIJOaDPWzW9S5%2BJHp8SDU9oWNpSZP3E38jGJEjmhcfN1h%2Flm%2FvzhFp5uhpVhZtFuhqdvRveFElzozW61tLDYi7%2BKbraQLKYkoPvZYmVMAP%2BMh%2FSvCHhBA7CUm%2BFIvwFNth8a3S5jR23M1pNIYxX4wWKitm9sDY3SNZHmF6HkOsDqZ9RJLQ6IXxjN0tgLFDYBGOU0QvgppYZSdZArLVWsZoT1Hl30edoGJO0jL5Y6fC6LSNEMw96u%2Bb9OIvEWVE9FAWk%2F3ekQ%2Bi5hNFN1OPds8SRpPlLxA1ineln%2FDYWYGf43tPEFNIljb7qW3G8s0%2BjpBG0lEvhY4WGbIUK90DtY2NEQnIr2XMqVcNua9V29b9Y8vqQDO1esdNuYoIzjbaFR%2Bwkeaz%2FTpgDd2mPIol0cqY5XV5SaOVejjw3bDpsR8RZpvYDzDt3eLCBjqwAd4IoMWsCSSjrg6vWQgmXJ7YLxQcv6ly6fGUnjkBDpDjn0j0lZEbCnsNl7ke7xDQIDp6kcxsLeug8HQL3B1%2F8ddcy0B%2F%2B%2BIXSHyjLEuMqiGym37U0%2BkDR0lcIt3eLWdEknalw6IrEv%2FbNrY%2FVAv%2BmxnWjkPG%2BM5dyKK2d4VgQ1KnRzn3oGOZmg8oHSLxjiO9cxmu%2F7iniBvw%2Fj298LCkPXGgJZlaEuSBpL9vmGuNE5CC&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250623T015922Z&X-Amz-SignedHeaders=host&X-Amz-Expires=300&X-Amz-Credential=ASIAUPUUPRWERVLZGAA6%2F20250623%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=7f7607170a2247ba3a5e16a7a9fb3462b7bfe6af9b71f4b04e0fe00563823cd0&abstractId=5011080), [Google](<https://scholar.google.com/scholar?q=>).
- 作者在 PDF 论文的文末附上了 R codes，可以作为推文的素材。如果你对 Stata 或 Python 比较熟悉，可以借助 AI 把作者提供的 R codes 转换为 Stata 或 Python 代码。

- Abstract: This paper examines the bias introduced in fixed effects estimators when a collider variable influenced by both the explanatory variable and the outcome is absorbed by the fixed effects. We derive an expression for the bias as a function of the within-group and between-group variances of the collider variable and the strength of the induced correlation caused by the collider. The analysis reveals that lower within-group variance or higher between-group variance of the collider amplifies the bias by inducing a stronger correlation between the explanatory variable and the error term. We discuss the implications for empirical research, cautioning against the indiscriminate use of fixed effects and emphasizing the need for careful model specification to mitigate collider bias.
- Keywords: fixed effects, collider variables, endogenous control.

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)


# B838：论文推介：控制变量问题

Hünermund, P., & Louw, B. (2023). On the Nuisance of Control Variables in Causal Regression Analysis. Organizational Research Methods, 28(1), 138–151. [Link](https://doi.org/10.1177/10944281231219274), [PDF](https://journals.sagepub.com/doi/epdf/10.1177/10944281231219274), [Google](<https://scholar.google.com/scholar?q=On the Nuisance of Control Variables in Causal Regression Analysis>).

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)

# B837：翻译 + 适当修改和精简：混淆变量问题
Frake, J., Hagemann, A., & Uribe, J. (2024). Collider bias in strategy and management research: An illustration using women CEO’s effect on other women’s career outcomes. Strategic Management Journal, 45(7), 1393–1419. Portico. [Link](https://doi.org/10.1002/smj.3588), [PDF](https://sms.onlinelibrary.wiley.com/doi/epdf/10.1002/smj.3588), [Google](<https://scholar.google.com/scholar?q=Collider bias in strategy and management research: An illustration using women CEO’s effect on other women’s career outcomes. Strategic Management Journal, 45(7), 1393–1419>).

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)


# B836：翻译+适当修改：IVDML包

- <https://github.com/cyrillsch/IVDML>
  - Note: 你可以 Fork 这个仓库，然后就可以在自己的账号下打开编辑模式，看到原始 Markdown 文档并进行翻译和编辑了。 

## 简介

The IVDML package implements an instrumental variable (IV) estimator for potentially heterogeneous treatment effects in the presence of endogeneity as presented in Scheidegger, Guo and Bühlmann (2025). The estimator is based on double/debiased machine learning (DML) (Chernozhukov et al., 2018) and uses efficient machine learning instruments (MLIV) and kernel smoothing.

We assume that we observe $N$ i.i.d. copies of the model $Y_i=\beta\left(A_i\right) D_i+g\left(X_i\right)+\epsilon_i . Y_i$ is the response variable and $D_i$ is the treatment variable. $X_i$ are the observed covariates and $A_i$ is a univariate continuous covariate with respect to which we want to consider heterogeneity (usually $A_i$ is a component of $X_i$ ). $\epsilon_i$ is an error term that satisfies $E\left[\epsilon_i \mid X_i\right]=0$, but we have endogeneity, meaning that $E\left[\epsilon_i \mid D_i, X_i\right] \neq 0$. To deal with the endogeneity, we assume that we have access to an instrumental variable $Z_i$ that satisfies $E\left[\epsilon_i \mid Z_i, X_i\right]=0$. To goal is to conduct inference on the heterogeneous treatment effect $\beta(a)$ for some specific value $a$ of $A_i$.

We quickly describe the main idea of our estimator. Assume for a moment that the treatment effect $\beta(\cdot)=\beta$ is constant (i.e. does not depend on $A_i$ ). Then, $\beta$ is identified via $\beta=\frac{E\left[\left(Y_i-E\left[Y_i \mid X_i\right]\right)\left(E\left[D_i \mid Z_i, X_i\right]-E\left[D_i \mid X_i\right]\right)\right]}{E\left[\left(D_i-E\left[D_i \mid X_i\right]\right)\left(E\left[D_i \mid Z_i, X_i\right]-E\left[D_i \mid X_i\right]\right)\right]}$. Hence, an estimate $\hat{\beta}$ of $\beta$ can be obtained by estimating the so-called nuisance functions $f\left(Z_i, X_i\right)=E\left[D_i \mid Z_i, X_i\right]$, $\phi\left(X_i\right)=E\left[D_i \mid X_i\right]$ and $l\left(X_i\right)=E\left[Y_i \mid X_i\right]$ using arbitrary user-chosen machine-learning and calculating a sample version of the identification given above. In practice, this is done using a cross-fitting scheme (Chernozhukov et al. 2018).

If we allow for the treatment effect $\beta(\cdot)$ to depend on the univariate continuous quantity $A_i$, and $A_i$ is a component of $X_i$, we can make the identification $\beta(a)=\frac{E\left[\left(Y_i-E\left[Y_i \mid X_i\right]\right)\left(E\left[D_i \mid Z_i, X_i\right]-E\left[D_i \mid X_i\right]\right) \mid A_i=a\right]}{E\left[\left(D_i-E\left[D_i \mid X_i\right]\right)\left(E\left[D_i \mid Z_i, X_i\right]-E\left[D_i \mid X_i\right]\right) \mid A_i=a\right]}$. conditional on $A_i=a$. In the sample version, we then use a kernel function $K(\cdot)$ (for example the Gaussian kernel $K(t)=\exp \left(-t^2 / 2\right) / \sqrt{2 \pi}$ ) to estimate the conditional expectations given $A_i=a$.

For a detailed discussion of the method, we refer to Scheidegger, Guo and Bühlmann (2025). We now demonstrate, how the IVDML package is used in practice.

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)

# B835：RPIV：全新工具变量检验方法

Scheidegger, C., Londschien, M., & Bühlmann, P. (2025). A Residual Prediction Test for the Well-Specification of Linear Instrumental Variable Models (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2506.12771) (rep), [PDF](https://arxiv.org/pdf/2506.12771.pdf), [Google](<https://scholar.google.com/scholar?q=A Residual Prediction Test for the Well-Specification of Linear Instrumental Variable Models (Version 1)>). [R codes](https://github.com/cyrillsch/RPIV_Application)

实操代码：

- [RPIV - R codes](https://github.com/cyrillsch/RPIV)
  - [RPIV Application](https://github.com/cyrillsch/RPIV_Application)

摘要：

- The linear instrumental variable (IV) model is widely applied in observational studies. The corresponding assumptions are critical for valid causal inference, and hence, it is important to have tools to assess the model's well-specification. The classical Sargan-Hansen J-test is limited to the overidentified setting, where the number of instruments is larger than the number of endogenous variables. Here, we propose a novel and simple test for the well-specification of the linear IV model under the assumption that the structural error is mean independent of the instruments. Importantly, assuming mean independence allows the construction of such a test even in the just-identified setting. We use the idea of residual prediction tests: if the residuals from two-stage least squares can be predicted from the instruments better than randomly, this signals misspecification. We construct a test statistic based on sample splitting and a user-chosen machine learning method. We show asymptotic type I error control. Furthermore, by relying on machine learning tools, our test has good power for detecting alternatives from a broad class of scenarios. We also address heteroskedasticity- and cluster-robust inference. The test is implemented in the R package `RPIV` and in the `ivmodels` software package for Python.
- Implementations of our test can be found in the R package `RPIV`, available at <https://github.com/cyrillsch/RPIV>, and as part of the `ivmodels` software package for Python (Londschien and Bühlmann, 2024), available at <https://github.com/mlondschien/ivmodels>.

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)


# B834：新书介绍：https://mml-book.com

- https://mml-book.com
- https://github.com/mml-book/mml-book.github.io
- PDF: https://mml-book.github.io/book/mml-book.pdf


# B833：翻译+适当补充：tidytable：R语言-制作漂亮的表格

- Kazuharu Yanagimoto, 2024, Blog, A Gamechanger of Creating Tables in R: tinytable. [Link](https://kazuyanagimoto.com/blog/2024/04/29/)

务必自己实操一下，确保读者可以根据你的介绍正确安装相关 package 并使用。

- 翻译这篇推文。可以适当意译，以便符合中文读者的阅读习惯。
- 文中的代码务必自己执行一下，酌情补充必要的安装代码，确保读者可以复现。
- 可以借助 AI 工具进行翻译，请务必进行人工校对与适当改写，避免语言过于机械。
- 在开头部分，介绍一下这篇推文的作者和背景。

# B832：github Desktop 使用方法介绍

参考如下资料，务必自己实操一下，确保读者可以根据你的介绍正确安装相关软件并使用。

- The Examples Book, [GitHub Desktop](https://the-examples-book.com/tools/git/github-desktop)
- [GitHub Desktop 🖥️ for Windows: Installation & Getting Started](https://www.codearmo.com/blog/github-desktop-install-use-windows)

其他资料：

- [GitHub Desktop](https://desktop.github.com/)
- [GitHub Desktop - 简体中文](https://desktop.github.com/zh-CN/)
- [Getting started with GitHub Desktop](https://docs.github.com/en/desktop/overview/getting-started-with-github-desktop)

可以考虑录制一个视频，算作第二篇推文的工作量。


# B831：翻译+Python 实操：从正态分布中抽样

> Brian Keng, 2015, Blog, Sampling from a Normal Distribution. [Link](https://bjlkeng.io/posts/sampling-from-a-normal-distribution/), [ipynb](https://bjlkeng.io/posts/sampling-from-a-normal-distribution/index.ipynb)

https://bjlkeng.io/posts/sampling-from-a-normal-distribution/index.ipynb

- 翻译这篇推文。可以适当意译，以便符合中文读者的阅读习惯。
- 文中的代码务必自己执行一下，酌情补充必要的安装代码，确保读者可以复现。
- 可以借助 AI 工具进行翻译，请务必进行人工校对与适当改写，避免语言过于机械。
- 在开头部分，介绍一下这篇推文的作者和背景。

# B830：翻译 + 适当补充：BS 公式与 Python 演示

- [Pricing Derivatives Using Black-Scholes-Merton Model](https://mrislambd.github.io/statandprob/posts/optionprice/)

- 翻译这篇推文。可以适当意译，以便符合中文读者的阅读习惯。
- 文中的 Python 代码务必自己执行一下，酌情补充必要的安装代码，确保读者可以复现。
- 可以借助 AI 工具进行翻译，请务必进行人工校对与适当改写，避免语言过于机械。
- 在开头部分，介绍一下这篇推文的作者和背景。


# B829：翻译 + 适当补充：大数定律与中心极限定理

- [Understanding Law of Large Numbers and Central Limit Theorem](https://mrislambd.github.io/statandprob/posts/lln/)


- 翻译这篇推文。可以适当意译，以便符合中文读者的阅读习惯。
- 文中的 Python 代码务必自己执行一下，酌情补充必要的安装代码，确保读者可以复现。
- 可以借助 AI 工具进行翻译，请务必进行人工校对与适当改写，避免语言过于机械。
- 在开头部分，介绍一下这篇推文的作者和背景。

# B828：多元回归分析-Python 实现

- [多元回归分析-Python 实现](https://mrislambd.github.io/dsandml/posts/multiplelinreg/)
  - OLS 简介
  - 梯度下降原理和 Python 代码

- 翻译这篇推文。可以适当意译，以便符合中文读者的阅读习惯。
- 文中的代码务必自己执行一下，酌情补充必要的安装代码，确保读者可以复现。
- 可以借助 AI 工具进行翻译，请务必进行人工校对与适当改写，避免语言过于机械。
- 在开头部分，介绍一下这篇推文的作者和背景。


# B827：quarto精简版幻灯片：支持 R和Python 代码嵌入和执行

[github-quarto-clean-typst](https://github.com/kazuyanagimoto/quarto-clean-typst), [-PDF-](https://kazuyanagimoto.com/quarto-clean-typst/template-full.pdf)

## 简介：Quarto-Clean-Typst Format

A minimalistic presentation theme for Quarto + Typst + [Touying](https://touying-typ.github.io/). Theme design is deeply inspired by Grant McDermott's [Clean theme](https://github.com/grantmcdermott/quarto-revealjs-clean) for Quarto + Reveal.js.

Click the image below to see a long [demo](https://kazuyanagimoto.com/quarto-clean-typst/template-full.pdf). Code is available [here](https://github.com/kazuyanagimoto/quarto-clean-typst/blob/main/template-full.qmd).


## Install

If you would like to add the clean theme to an existing directory:

```r
quarto install extension kazuyanagimoto/quarto-clean-typst
```

or you can use a Quarto template that bundles a .qmd starter file:

```r
quarto use template kazuyanagimoto/quarto-clean-typst
```



# B826：翻译 + 适当补充：假设检验与 p 值

- [Hypothesis testing in quant finance](https://reasonabledeviations.com/2021/06/17/hypothesis-testing-quant/)

在此基础上再加上 empirical p-value 的介绍。

- 翻译这篇推文。可以适当意译，以便符合中文读者的阅读习惯。
- 文中的代码务必自己执行一下，酌情补充必要的安装代码，确保读者可以复现。
- 可以借助 AI 工具进行翻译，请务必进行人工校对与适当改写，避免语言过于机械。
- 在开头部分，介绍一下这篇推文的作者和背景。


# B825：翻译 + 适当补充：如何阅读哲学书籍

- [probability-matching-brief-intro](https://naturalrationality.blogspot.com/2007/11/probability-matching-brief-intro.html)

- 翻译这篇推文。可以适当意译，以便符合中文读者的阅读习惯。
- 可以借助 AI 工具进行翻译，请务必进行人工校对与适当改写，避免语言过于机械。
- 在开头部分，介绍一下这篇推文的作者和背景。可以参考 [Reasonable Deviations](https://reasonabledeviations.com/) 网站的介绍，也可以搜索作者的个人主页。

# B824：翻译 + 适当补充 - 我是如何读书的

- [How I Read Books](https://reasonabledeviations.com/2022/01/24/reading-philosophy/)

- 翻译这篇推文。可以适当意译，以便符合中文读者的阅读习惯。
- 可以借助 AI 工具进行翻译，请务必进行人工校对与适当改写，避免语言过于机械。
- 在开头部分，介绍一下这篇推文的作者和背景。可以参考 [Reasonable Deviations](https://reasonabledeviations.com/) 网站的介绍，也可以搜索作者的个人主页。


# B823：Stata 绘图：graphfunctions 命令 - 自由绘制圆形、饼图等图形元素

写一篇推文介绍 `graphfunctions` 命令。

- github: <https://github.com/asjadnaqvi/stata-graphfunctions>，作者在这个仓库里放置了很多绘图实例。可以插入推文中介绍。

除了这些例子之外，建议自己思考一下，这个命令可以和那些命令结合 绘制一些有用的图形。比如，制作课件，数据可视化等。我认为作者自己呈现的例子都没有实际应用价值。比如，如下代码：

```stata
shapes square, len(8) rotate(90) replace

twoway ///
	(area _y _x, nodropbase fcolor(%50))	///
	(scatter _y _x, mlab(_order))	///
		, ///
		legend(off) ///
		xlabel(-10(2)10) ylabel(-10(2)10) xsize(1) ysize(1) aspect(1)
```

![20241106225314](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20241106225314.png)

可以用来生成 [Stata 绘图：唯美的函数图 - 自定义水平附加线和竖直附加线](https://www.lianxh.cn/details/1064.html) 文中的图 6。

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/function_addline_06.png)

<br>
<br>

## 简介


## 安装

## Installation

The package can be installed via SSC or GitHub. The GitHub version, *might* be more recent due to bug fixes, feature updates etc, and *may* contain syntax improvements and changes in *default* values. See version numbers below. Eventually the GitHub version is published on SSC.

SSC (**v1.4**):

```Stata 
ssc install graphfunctions, replace
```

GitHub (**v1.5**):

```Stata 
net install graphfunctions, from("https://raw.githubusercontent.com/asjadnaqvi/stata-graphfunctions/main/installation/") replace
```

See the help file `help graphfunctions` for details.

If you want to make a clean figure, then it is advisable to load a clean scheme, especially if you are not using newer Stata versions. My own setting is the following:

```Stata 
ssc install schemepack, replace
set scheme white_tableau  
graph set window fontface "Arial Narrow"
```



# B823：DDML-FE 

两篇推文的工作量

- Clarke, P. S., & Polselli, A. (2025). Double machine learning for static panel models with fixed effects. Econometrics Journal. [Link](https://doi.org/10.1093/ectj/utaf011), [PDF](http://sci-hub.ren/10.1093/ectj/utaf011), [Google](<https://scholar.google.com/scholar?q=Double machine learning for static panel models with fixed effects>). [-Appendix-](https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/ectj/PAP/10.1093_ectj_utaf011/2/utaf011_online_appendix.pdf?Expires=1752824167&Signature=WKaiVKLA-00aEZIMO9vx3dhZZgTLCbcqvACdqBy02ZNA6Vqkn-jZ4rl68WMd6y91~Mt9CCPUxQG9RwIdOPMzEbmv4~6u3RNzF8ghXmXTSU8yPREyG4f61PV2SPSBmwbRullB7tjgCDJFz3pKyewAVdjrXcupZSlFjDbGXQWeZzSL87jh9ZYpTK7BfpglF9bHX3uTjxtfTM3mttuqL3ID7W6cWkL238ggg~e7oR1LwCnUaA5x7mtOSwqD3cmDWB4m9jN7Fov2G308VLwHTDPdF-SFqU~~uWWX-8Edf04uDFu67FfTj~-2frvalFBDOF~zysYlVw9rYzHMCoNW7ejvqg__&Key-Pair-Id=APKAIE5G5CRDK6RD3PGA),  [-Replication-](https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/ectj/PAP/10.1093_ectj_utaf011/2/utaf011_replication_package_clarke_polselli.zip?Expires=1752824167&Signature=b9JFM59g8TeK1BrfE7-iqsJsuLLNwwwNtyYYxekBfIbm-ywodjDsGdHD8gnt8-Rzbk74zzXbo-9m2cb1iG2IUtkPdZwN1P-d4AWk11m6tQm6D9G529RMfLtf6RWqHpckGeiIJbBpeaGm8fYZ8Q-nbseMr0mRZDzBMPGGVx3Hqxrs-Fnki9JTf7RiO3B7thbh2h36r6CKEw67bIZhMDSbLTo10~Y~-6n5pbv-wss9r8X5IdjFGATQSFgqvBT4H2Xadl9JvidxaD9Jc2gnw67aptFhxNIuXn9JGcVKScn-QL7ZwCq8rMNvr6Wg92fTKl5GEpNp8yFPLKiOagFFKApjFQ__&Key-Pair-Id=APKAIE5G5CRDK6RD3PGA), 

## 3.2. Model and Assumptions

We extend the partially linear model proposed by Robinson (1988) to panel data by introducing a fixed effect $\alpha_i^*$ to give the partially linear panel regression (PLPR) model

$$
Y_{i t}=D_{i t} \theta_0+g_1\left(\boldsymbol{X}_{i t}\right)+\alpha_i^*+U_{i t}
$$

where $g_1$ is a non-linear nuisance function of $\boldsymbol{X}_{i t}$ and $E\left[U_{i t} \mid D_{i t}, \boldsymbol{X}_{i t}, \alpha_i^*\right]=0$, but $E\left[\alpha_i^* \mid D_{i t}, \boldsymbol{X}_{i t}\right] \neq 0$. The target parameter $\theta_0$ is the average partial effect of continuous $D_{i t}$ such that $d \theta_0=E\left[Y_{i t}(d)-Y_{i t}(0)\right]$, or the average treatment effect (ATE) $E\left[Y_{i t}(1)-Y_{i t}(0)\right]$ for binary treatments.

Following Chernozhukov et al. (2018), we focus on the partialled-out PLPR (PO-PLPR) model

$$
Y_{i t}=V_{i t} \theta_0+l_1\left(\boldsymbol{X}_{i t}\right)+\alpha_i+U_{i t}
$$


$$
V_{i t}=D_{i t}-m_1\left(\boldsymbol{X}_{i t}\right)-\gamma_i
$$

where $l_1$ and $m_1$ are nuisance functions, $\alpha_i$ is a fixed effect, $E\left[U_{i t} \mid V_{i t}, \boldsymbol{X}_{i t}, \alpha_i\right]=0$, and $V_{i t}$ is the residual of a non-linear additive noise treatment model, depending on fixed effect $\gamma_i$, and satisfying $E\left[V_{i t} \mid \boldsymbol{X}_{i t}, \gamma_i\right]=0$. The focus will be on the PO-PLPR rather than the PLPR model because, as shown below, $l_1$ is a conditional expectation over $Y_{i t}$ whereas $g_1$ is a conditional expectation over counterfactual $Y_{i t}(0)$ that must generally be learnt iteratively. Moreover, the orthogonalized score on which DML estimation of $\theta_0$ is based involves $V_{i t}$ whether it is derived under PLPR or PO-PLPR (see Section 5).

## 实现

[-Replication-](https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/ectj/PAP/10.1093_ectj_utaf011/2/utaf011_replication_package_clarke_polselli.zip?Expires=1752824167&Signature=b9JFM59g8TeK1BrfE7-iqsJsuLLNwwwNtyYYxekBfIbm-ywodjDsGdHD8gnt8-Rzbk74zzXbo-9m2cb1iG2IUtkPdZwN1P-d4AWk11m6tQm6D9G529RMfLtf6RWqHpckGeiIJbBpeaGm8fYZ8Q-nbseMr0mRZDzBMPGGVx3Hqxrs-Fnki9JTf7RiO3B7thbh2h36r6CKEw67bIZhMDSbLTo10~Y~-6n5pbv-wss9r8X5IdjFGATQSFgqvBT4H2Xadl9JvidxaD9Jc2gnw67aptFhxNIuXn9JGcVKScn-QL7ZwCq8rMNvr6Wg92fTKl5GEpNp8yFPLKiOagFFKApjFQ__&Key-Pair-Id=APKAIE5G5CRDK6RD3PGA)

DML estimation is conducted in r using the XTDML package in the replication package (or accessible in its latest version at <https://github.com/POLSEAN/XTDML> at the time of writing) which is built on DoubleML by Bach et al. ([2024](javascript:;)).

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)





# B822：翻译+适当修改-异质性分析：6 种方法对比与 R 语言实现

Bull, H., & Ketz, P. (2023). Lab 3: Estimating Heterogenous Treatment Effects. Semester 2, 2022/23. Retrieved from https://ml-in-econ.appspot.com/lab3.html

We discuss and implement 6 different methods to estimate heterogeneous treatment effects:

-   OLS with interaction terms
-   Post-selection Lasso
-   Causal Trees
-   Causal Forests

We compare the heterogeneity identified by each of these methods. We compare the CATE of each of these methods.

Finally, we compute the Best Linear Predictor (BLP) and the Sorted Group Average Treatment Effects (GATES).


# B821：论文推介和复现：Abadie's Kappa 和加权局部平均处理效应估计

这是两篇推文的工作量。

1. 简要介绍该文的基本思想、模型假设和适用条件
2. 介绍模型设定和估计思路 (可以忽略技术细节和证明过程，但需要呈现最核心的模型设定)。这些工作可以通过 AI 辅助完成：把 PDF 原文发给 AI，让它撰写这部分内容。提示词写法参见 [如何借助 AI 工具来伴读一篇理论类的论文？](https://www.lianxh.cn/details/1571.html)
3. 重点介绍论文 Section 4 中复现的三篇论文。包括
   - 论文的研究问题和数据来源
   - 论文的主要结论和贡献
   - 模型设定的数学公式和变量界定等
   - 复现代码展示，结果和分析

> Słoczyński, T., Uysal, S. D., & Wooldridge, J. M. (2024). Abadie’s Kappa and Weighting Estimators of the Local Average Treatment Effect. Journal of Business & Economic Statistics, 43(1), 164–177. [Link](https://doi.org/10.1080/07350015.2024.2332763), [PDF](http://sci-hub.ren/10.1080/07350015.2024.2332763), [Google](<https://scholar.google.com/scholar?q=Abadie’s Kappa and Weighting Estimators of the Local Average Treatment Effect>).
- [Replication files](https://doi.org/10.6084/m9.figshare.25438511.v2)
  - Stata codes and data for three papers. 
  - `card.dta`
  - `README.pdf`
  - `sipp.dta`
  - `suw_jbes_replicate.do`
  - `suw_jbes_significance.do`
  - `ae98.dta`


## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)

# B820：unitdid命令的原理和应用

> Arkhangelsky, D., Yanagimoto, K., & Zohar, T. (2024). On Causal Inference with Model-Based Outcomes (Version 4). arXiv. [Link](https://doi.org/10.48550/arXiv.2403.19563) (rep), [PDF](https://arxiv.org/pdf/2403.19563.pdf), [Google](<https://scholar.google.com/scholar?q=On Causal Inference with Model-Based Outcomes (Version 4)>), [github](https://github.com/kazuyanagimoto/unitdid/)
  - 曾用名: Using Event Studies as an Outcome in Causal Analysis
  - 应用: Arkhangelsky, D., Yanagimoto, K., & Zohar, T. (2024). On Causal Inference with Model-Based Outcomes (Version 4). arXiv. [Link](https://doi.org/10.48550/arXiv.2403.19563) (rep), [PDF](https://arxiv.org/pdf/2403.19563.pdf), [Google](<https://scholar.google.com/scholar?q=On Causal Inference with Model-Based Outcomes (Version 4)>). [unitdid](https://kazuyanagimoto.com/unitdid/), [github](https://github.com/kazuyanagimoto/unitdid/)

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)


# B819：论文推介和复现：

- 工作量：视为两篇推文

> Heiler, P., & Knaus, M. C. (2025). Heterogeneity Analysis with Heterogeneous Treatments (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2507.01517) (rep), [PDF](https://arxiv.org/pdf/2507.01517.pdf), [Google](<https://scholar.google.com/scholar?q=Heterogeneity Analysis with Heterogeneous Treatments (Version 1)>). 

- [Supplementary R notebook](https://mcknaus.github.io/assets/code/RNB_HK2_decomposition.nb.html) and [Docker Hub](https://hub.docker.com/repository/docker/mcknaus/hk2_decomposition/general) provide additional results and replication code. The method is available as part of the [causalDML](https://github.com/MCKnaus/causalDML) R package.


## 简介

在实证研究中，我们经常需要评估一项政策或干预措施的效果，而分析不同群体之间的“效应异质性”是一个标准操作。但这里有个问题：我们通常分析的“处理效应”其实是一个“大杂烩”。比如，一项“职业培训”可能包含了很多不同的课程模块，或者学员参与的深度和广度也各不相同。这些细分的处理本身就是异质的。

在这种情况下，如果我们还用传统的方法（比如比较不同组别调整后的均值差异）来分析，就很容易得出误导性的结论，特别是当不同群体接受具体处理措施的倾向存在系统性差异时。

为了解决这个问题，本文提出了一个新的分解框架。这个框架能清晰地剖析出我们观察到的组间差异，到底有多少是源于“效应异质性”（即相同的处理对不同的人效果不同），又有多少是源于“处理异质性”（即不同的人接受了不同的处理）。我们为此设计了半参数的去偏机器学习估计方法，这种方法即使在处理方式复杂、组间重叠度不高的情況下也同样稳健。

我们用这个新框架重新审视了一个经典的案例：积极劳动力市场政策中，培训回报存在的性别差异。分解结果令人惊讶：所谓的“性别鸿沟”几乎完全是由于女性和男性接受了不同的培训内容，而不是因为同样的培训对男女产生了不同的回报。具体来说，女性被更多地引导到那些本身回报率就比较低的职业培训项目中去了。

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)


# B818：复现与应用-机器学习与因果推断

- Baiardi, A., & Naghi, A. A. (2024). The value added of machine learning to causal inference: evidence from revisited studies. The Econometrics Journal, 27(2), 213–234. [Link](https://doi.org/10.1093/ectj/utae004), [-PDF-](https://watermark.silverchair.com/utae004.pdf?token=AQECAHi208BE49Ooan9kkhW_Ercy7Dm3ZL_9Cf3qfKAc485ysgAAA0wwggNIBgkqhkiG9w0BBwagggM5MIIDNQIBADCCAy4GCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMZKPBTHbOj_k_VDOzAgEQgIIC_8BAJuG7iIAG6IKZmU_WIpg0lYkBjmlB4YBi8O109DsmDvyywCN8XNN5syPiTT-ODWuuS7kG3RnVcsaKGpd3F6PWfXGof3y4qRGPEXLmYgzHaXND9L8k0P-hm1BLgzsW-NSFYDoAPtX2BN_pjfcBtSU8ith6y-r4XB9sq9BMrFLxQOdh3UjXA30phX-k3Dw9I638hAKW-wH9MuGpq_pr0QuIpipNcmS4T8OfTSd9iLorzYuVg0clg-ql1OBx0OJMl9UP6U2SGQ87C03zxV0wMG71SOapsf9diSYVGZJ8d1cwCsPo2kIaLwtKahAp9dKOcUzdsmVhk8Xmxzznh1cWxfw6gI6A8msu_6tKSrLm2X6m78r7zhaCv4Zr-SqYLjANSQWOueWTd9ZVw8TRXTWncb8m-9UlWQJig1kZldOBnZM-CzGcQW63eDpD2keFuGzzsobPyY_vC5tVDKygfDd6SjROgKJx3vWjnDjYSfnsz4J31wU3isDMHQ0PIGziJhQ-mQZrC9QrLqgkby6gbW6akjiJAc6SLeovNThKlRtkY-NU1uGzHLKne7lo2YLf_XKZr4SOQQfuPqNNKRKy3PQhr_Jwd8xWvNtT-wcFS8z4J2EPYEjVxRvbfT9qS0uNnhfJ3p-ew6pDRTcHJCh-v5bywaeBgZuSebyaT1Xgs5jNt6XcwdL3-UnL5zaq1wwaI9BUh7P2K452p5IuCBViUzCGR9tQFV-LzFRYjmf0DhBTugnwqPhSqNRKJrC7SUVZGjwPfibhO_Nmo-gmpb4os0nzhnYfw-TkwAAfYYdthIAw54oq3gsK4l_wygJ1JQ2g7mXUJPhkqVulX9mku4ks7tUBgBrJcHH1vbvs3lGWy-in3iHZel1_9WCt3LqyekczyZNElEqe0re5d5PMWX-Ad0127qw_Rctc_QhVAnaojKD2SrmvmGjeEJcH3M_JLFAW66Ch7Id3klo4t1zaODIYmCxVNiYzncSC5coHL5v-L78W9mh66opEENeNMiZmahUMf6Gf), [PDF-wps](https://papers.tinbergen.nl/21001.pdf), [Google](<https://scholar.google.com/scholar?q=The value added of machine learning to causal inference: evidence from revisited studies>).
  - [-Appendix-](https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/ectj/27/2/10.1093_ectj_utae004/1/utae004_online_appendix.pdf?Expires=1752831230&Signature=INLwGecCD8eE256MvLEbADNBC4edPX2XKmfLcsfRp0i~4ix6FTCFwFwhFGBt0euN3jvfqiLKpc19kCTtTpNl0Lw9s86Nx09dN0IJEbGHhGb2~WvyvWpxOgqqhNd15wGB0n~FRpU7orOHGl4gB3grfo4RjwGsqTIolT4OIZiVqKEHqFJfnb8AqErUuBrO9Y5wgf8AjF3ngkdFhGWjFBtgVoV0okqYmkQjVtACqMF9Nb07zjqJod9YsLKWon-NASDLfFcEZyz5BC1OgbWP2zxHv-5F67BEXwwJgdnAALrg774VIcwEjrw0SyNJcfkiZC8RzgQpujSI8w1tY7DRn2WdcA__&Key-Pair-Id=APKAIE5G5CRDK6RD3PGA), 提供了文中的公式和模型设定公式等内容。
  - [-Replication-](https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/ectj/27/2/10.1093_ectj_utae004/1/utae004_replication_files.zip?Expires=1752831230&Signature=OorVYyIbynMNU1cIFUk-c-teed1HQWQqF6mSCLCqaZOqTaIFvXONrbRW25tPtetqPAKivd8Pe0paTAijclbTj62lJ72CLqOE0L1oT-Y3MBJzs~qhQDvrhJGHUIPYIfXPHJ8NtL9McpJwlJW31f~AWgEeh7TSim-BQL-o9aj9Uk4BDDCmnncEgWy0fZD7AgmMhPiBGb3hSu0pxYI12qpo-VVPv348iGHR9IK5VDdexYxWIu7uSMpz1O20IakOtzMYeDBhrg5KdDsrQOvMtqu-gg38qymOewNd~Gu8-5qLE4vNGC9swF7g-lxiWcwQa1dIhX2gcQpDyo71GaGz2JtiMQ__&Key-Pair-Id=APKAIE5G5CRDK6RD3PGA)，R codes 


## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)




# B817：概率匹配与 Kelly 策略：从北极狐生存到投资决策的概率思想

> 原文：<https://reasonabledeviations.com/2022/01/10/probability-matching-kelly/>

我用 ChatGPT 写了一个版本，参见 [ChatGPT 对话过程](https://chatgpt.com/c/684a20e7-19cc-8005-b1ca-8eb20d29afed)。

你在我撰写的初稿 ([点击查看](https://github.com/arlionn/lianxhta/blob/main/sample/B817-Probability-Matching-and-Kelly-Criterion.md)) 基础上修改完善即可。待完善：

- 运行推文初稿中的 Python 代码，生成图形，插入推文。并使用代码块将 Python 代码嵌入推文。当然，还需要在推文中解释生成图形的思路和方法。
- 修改、润色全文的中文表述，去除机器翻译的痕迹，确保语言流畅自然。



# B816：论文复现：IV+PSM

Tübbicke, S. (2023). When to use matching and weighting or regression in instrumental variable estimation? Evidence from college proximity and returns to college. Empirical Economics, 65(6), 2979–2999. [Link](https://doi.org/10.1007/s00181-023-02441-7), [PDF](https://link.springer.com/content/pdf/10.1007/s00181-023-02441-7.pdf), [Google](<https://scholar.google.com/scholar?q=When to use matching and weighting or regression in instrumental variable estimation? Evidence from college proximity and returns to college>). 
- Replication - Stata dofiles and R codes
  - [Supplementary Material 1](https://static-content.springer.com/esm/art%3A10.1007%2Fs00181-023-02441-7/MediaObjects/181_2023_2441_MOESM1_ESM.do)
  - [Supplementary Material 2](https://static-content.springer.com/esm/art%3A10.1007%2Fs00181-023-02441-7/MediaObjects/181_2023_2441_MOESM2_ESM.r)
  - [Supplementary Material 3](https://static-content.springer.com/esm/art%3A10.1007%2Fs00181-023-02441-7/MediaObjects/181_2023_2441_MOESM3_ESM.do)

- Standard two-stage least squares (2SLS) regression remains dominant in instrumental variables estimation of causal effects even though the literature has shown that 2SLS may be inconsistent when effects are heterogenous and the instrument is only valid when conditioning on covariates. To show that this is not merely a hypothetical threat, this paper re-estimates the returns to college using college proximity as an instrument based on the data from Card (Aspects of labour market behavior: essays in honour of John Vanderkamp, University of Toronto Press, Toronto, 1995). The results show that 2SLS yields systematically larger estimates of the returns to college than more flexible estimators based on the instrument propensity score. In the full sample, differences amount to about 50 to 100%. This is due to the implicit conditional-variance weighting performed by 2SLS. Moreover, in line with the theoretical prediction by Sloczynski (When should we (not) interpret linear IV estimands as LATE? IZA discussion papers 14349, Institute of Labor Economics (IZA), 2021), findings suggest that the impact of the conditional-variance weighting is larger when instrument groups are not roughly the same size. Thus, it is advised to use 2SLS with caution and use estimators based on the instrument propensity score instead when groups are of different size and covariates are predictive of the instrument.
- By re-examining the Card ([1995](https://link.springer.com/article/10.1007/s00181-023-02441-7#ref-CR11 "Card D (1995) Using geographic variation in college proximity to estimate the return to schooling. In: Christophides LN, Grant EK, Swidinsky R (eds) Aspects of labour market behavior: essays in Honour of John Vanderkamp. University of Toronto Press, Toronto, pp 201--222")) data on college proximity and the returns to college, this paper shows that potential inconsistencies in 2SLS estimates of local treatment effects documented in the theoretical literature are not merely a hypothetical threat when effects are heterogenous. For the data at hand, 2SLS yields systematically larger effects than more flexible estimators based on the PS with differences amounting to roughly 50 to 100%. It is shown that this is because standard linear-in-covariates 2SLS yields a conditional variance-weighted average effect, putting more weight on units with a PS close to a coin flip. In line with theoretical predictions by Sloczynski ([2021](https://link.springer.com/article/10.1007/s00181-023-02441-7#ref-CR31 "Sloczynski T (2021) When should we (not) interpret linear IV estimands as LATE? IZA discussion papers 14349, Institute of Labor Economics (IZA)")), the results suggest that 2SLS estimates can be expected to be more trustworthy when sample shares of instrument groups are roughly of equal size. Moreover, the paper shows that this is because the effects of conditional-variance weighting tend to be less severe when groups sizes are similar. Overall, the results show that the presumption that 2SLS yields point estimates close to more flexible estimators based on the PS as argued by Angrist and Pischke ([2008](https://link.springer.com/article/10.1007/s00181-023-02441-7#ref-CR5 "Angrist JD, Pischke JS (2008) Mostly harmless econometrics. Princeton UUniversity Press, Princeton")) does not apply in general and that one should be suspicious of 2SLS estimates when group sizes differ substantially and covariates are predictive of the instrument. In that case it may be best to use semi- or non-parametric estimation techniques instead. At the very least, one should use these methods to assess the sensitivity of estimates regarding implicit parametric assumptions made when using linear-in-covariates 2SLS.

## Tips

论文复现类推文写作指南参见 [连享会·助教答疑和推文指南](https://file.lianxh.cn/KC/lianxh_TA_Guide.pdf)，第 5 节。

可以参考 B813 的初稿生成过程，借助 AI 完成一部分内容。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)






# B815：论文推介：IV 综述

- Borusyak, K., Hull, P., & Jaravel, X. (2024). Design-based identification with formula instruments: a review. The Econometrics Journal, 28(1), 83–108. [Link](https://doi.org/10.1093/ectj/utae003), [HTML](https://academic.oup.com/ectj/article/28/1/83/7590835#507807770), [PDF](https://academic.oup.com/ectj/article-pdf/28/1/83/56662602/utae003.pdf), [-PDF2-](https://core.ac.uk/download/pdf/612327444.pdf), [Google](<https://scholar.google.com/scholar?q=Design-based identification with formula instruments: a review>).

可以参考 B813 的初稿生成过程，使用 AI 撰写推文初稿。

- [B813-豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))
- [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md)

# B814：simpletex：感觉比Mathpix还好用！

写一篇推文，介绍 [simpletex](https://simpletex.cn) 的使用方法。尽量覆盖 [simpletex.cn](https://simpletex.cn/) 中介绍的主要内容。 

包括：
- 简介
- 安装使用方法
  - 在线使用
  - 本地电脑端
  - 手机端
  - ……
- 输出格式：Word 和 Markdown 
- 作为Word/PowerPoint 插件

相关推文：

  - 连小白, 2025, [完美替代 MathPix：我用 ChatGPT、豆包、Kimi 识别数学公式](https://www.lianxh.cn/details/1639.html), 连享会 No.1639.
  - 连玉君, 2020, [神器-数学公式识别工具-mathpix](https://www.lianxh.cn/details/284.html), 连享会 No.284.


# B813：论文推介：渐进DID的五种估计方法对比

&#x1F34E;  !! 请在我生成的 [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md) 基础上修改完善，形成本推文的最终稿。

> Wing, C., Yozwiak, M., Hollingsworth, A., Freedman, S., & Simon, K. (2024). Designing Difference-in-Difference Studies with Staggered Treatment Adoption: Key Concepts and Practical Guidelines. Annual Review of Public Health, 45(1), 485–505. [Link](https://doi.org/10.1146/annurev-publhealth-061022-050825), [PDF](https://www.annualreviews.org/docserver/fulltext/publhealth/45/1/annurev-publhealth-061022-050825.pdf?expires=1752678753&id=id&accname=guest&checksum=345B1C3C23D23EC0D6A9B385A91F2513), [Google](<https://scholar.google.com/scholar?q=Designing Difference-in-Difference Studies with Staggered Treatment Adoption: Key Concepts and Practical Guidelines>), [github-replication](https://github.com/hollina/arph-did-example)

我用豆包生成推文的初稿 ([豆包对话过程](https://www.doubao.com/thread/w8e524bfc59a644e2))。你可以在 [B813-初稿](https://github.com/arlionn/lianxhta/blob/main/sample/B813-Stragged-DID.md) 基础上继续完善。比如：

1. 把原文中的图片插入进来，增强推文的可读性；
2. 让 AI 帮助整理文中 Table 1 提到的各种方法的 Stata, R, Python 实现命令和 packages；
3. 使用 `lianxh` 命令将连享会此前发布的相关推文与 Section 4 中介绍的六种方法对应起来，供读者了解细节。
4. 增加一个 Section，介绍作者提供的 github 仓库中的代码和数据，如何运行，如何复现结果等。 


# B812：论文推介：元学习

- Salditt, M., Eckes, T., & Nestler, S. (2023). A Tutorial Introduction to Heterogeneous Treatment Effect Estimation with Meta-learners. Administration and Policy in Mental Health and Mental Health Services Research, 51(5), 650–673. [Link](https://doi.org/10.1007/s10488-023-01303-9), [PDF](https://link.springer.com/content/pdf/10.1007/s10488-023-01303-9.pdf), [Google](<https://scholar.google.com/scholar?q=A Tutorial Introduction to Heterogeneous Treatment Effect Estimation with Meta-learners>).


# B811：mvttest：IV估计的排他性检验

- Andresen, M. E., & Huber, M. (2021). Instrument-based estimation with binarised treatments: issues and tests for the exclusion restriction. **The Econometrics Journal**, 24(3), 536–558. [Link](https://doi.org/10.1093/ectj/utab002), [PDF](https://folia.unifr.ch/documents/330276/files/instrument-basedestimationwithbinarisedtreatments_econometricsjournal.pdf?download), [Google](<https://scholar.google.com/scholar?q=Instrument-based estimation with binarised treatments: issues and tests for the exclusion restriction>). [-Replication-](https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/ectj/24/3/10.1093_ectj_utab002/1/utab002_replication_package.zip?Expires=1752829828&Signature=A6cZ0DV54dSC0U98GVpbobbLj8sz-aLC5ORmak7THBBGYpBks7HBinjIIerICOV0ttSYLCqkPs6Om60~yYwhWQOXX6HpX6gjHK4blLtQS42kXWBOvGtC1tXIsT0QcKMmooIdSzWfrgdVL4aNXl13AiL8W-JRbnQRYxXp3CqouKGdpfyc2umxiU3kLQEN1gGLmBifU-7QA4gzajU6jhZnXUHb~1OVBrvckGOCtXiKo9SohY5ejfjaCoXycRh06CIsTL~xxTn44--jLwGr5NCnPAC8lkQtwTsB5D1LgNSKNLPWMKFRZywFEZe4frC1l9auYUboz~K4juvGfOPy3-B5RA__&Key-Pair-Id=APKAIE5G5CRDK6RD3PGA) (包含两篇论文的复现过程) 
- Stata command: `mvtest`
  - [github](https://github.com/martin-andresen/mvttest)

## 简介

## 理论基础

## Stata 实操

### 安装

目前，只能通过作者的 [github 仓库](https://github.com/martin-andresen/mvttest) 安装 `mvttest` 命令：

```stata
net install mvttest, from("https://raw.githubusercontent.com/martin-andresen/mvttest/master")
```



# B810：Python 明星包：PyPortfolioOpt-投资组合优化分析

写一篇推文，介绍 `PyPortfolioOpt` 包的用法。
- 需要阅读手册和相关资料，补充理论部分
- 建议预先写一个 `.ipynb` 文件，讲义格式，内嵌 Python 代码和结果解读。(Python 环境配置，参见 [Python：安装和环境配置](https://book.lianxh.cn/ds/body/01_1_install-Python-Anocanda.html))。以此为基础在撰写推文，效率会高很多。发布推文时，`.ipynb` 文件可以放在推文的附件中。
- 举例时，对于中国上市公司，可以用 `akshare` 包获取股票数据；对于美股，可以使用 `yfinance` 包获取股票数据。
  - [cookbook](https://github.com/robertmartin8/PyPortfolioOpt/tree/master/cookbook)
  - 里面放置了几个典型的 `.ipynb` 文件，展示了如何使用 `PyPortfolioOpt` 包进行投资组合优化分析。 

## 参考资料

- [PyPortfolioOpt 主页](https://pyportfolioopt.readthedocs.io/en/latest/index.html)
  - [github]()
  - [作者的 blog](https://reasonabledeviations.com/2020/03/19/rebuilding-pyportfolioopt/)

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250612081459.png)

![20250612082027](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250612082027.png)

> Source: [PyPortfolioOpt - Plot](https://pyportfolioopt.readthedocs.io/en/latest/Plotting.html)

![20250612082117](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250612082117.png)

> Source: [PyPortfolioOpt - Plot](https://pyportfolioopt.readthedocs.io/en/latest/Plotting.html)




# B809：Stata 可视化：heatplot-热力图

写一篇推文，介绍 `heatplot` 命令的用法。主要参考资料如下：

- Ben Jann, 2019, [Heat (and hexagon) plots in Stata](https://www.stata.com/meeting/germany19/slides/germany19_Jann.pdf)

## 简介

Stata 模块 `heatplot` 用于绘制热力图和六边形热力图。

`heatplot` 可以基于变量或矩阵生成热力图。常见用法包括：将 X 和 Y 两个变量分箱后，统计每个组合出现的频率，并用颜色深浅来表示（即二维直方图）；也可以在 X 和 Y 的分箱格点上，用颜色梯度展示第三个变量 Z 的平均值，实现三元分布的可视化。此外，还可以直接用颜色梯度展示矩阵内容，比如相关系数矩阵或空间权重矩阵等。

## 安装方法

`heatplot` 是 Stata 中用于绘制热力图的强大工具。推荐通过 SSC 安装，具体步骤如下：

```stata
ssc install heatplot, replace
```

该命令依赖于 `palettes` 包（用于配色方案）以及 `colrspace` 包（Stata 14.2 及以上版本支持颜色空间管理）。请先安装这两个依赖：

```stata
ssc install palettes, replace
ssc install colrspace, replace
```

如果你希望使用 `heatplot` 的 `fast` 选项（加速大数据处理），还需安装 `gtools` 包：

```stata
ssc install gtools, replace
gtools, upgrade
```

此外，也可以直接从 GitHub 获取最新版（可能包含最新功能和修复）：

```stata
net install heatplot, replace from(https://raw.githubusercontent.com/benjann/heatplot/master/)
```

安装完成后，即可在 Stata 中使用 `heatplot` 进行热力图绘制。

## Stata 实操

> 写作说明：

执行 Ben Jann, 2019, [Heat (and hexagon) plots in Stata](https://www.stata.com/meeting/germany19/slides/germany19_Jann.pdf) 中的例子，配上说明文字。

图形模板：`set scheme cleanplots`

### 基本用法

以下是一个简单的 Stata 实操示例，演示如何使用 `heatplot` 绘制热力图：

```stata
. webuse nhanes2, clear
. heatplot weight height
``` 

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250708092845.png)

### 附加其他图形

```stata
hexplot weight height, statistic(count) color(plasma) ///
        cut(1(5)@max) keylabels(, range(1)) size ///
        addplot(lpolyci weight height, degree(1) psty(p2) lw(*1.5) ac(%50) alc(%0))
```

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250708093036.png)


# 809：Stata 可视化：pheatplot-图示系数的显著性

写一篇推文，介绍这个命令的用法。

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250611232839.png)


## 参考资料

可以翻译 + 意译 + 适当修改和整合如下资料，得到最终的推文文本。建议借助 AI 工具来完成。 

- [How to make heatplot in Stata | Correlation Heat plot](https://www.youtube.com/watch?v=PMo8NovkBFc&pp=0gcJCdgAo7VqN5tD)


### How To Make Heatplot In Stata | Correlation Heat Plot

[How to make heatplot in Stata | Correlation Heat plot](https://thedatahall.com/how-to-make-heatplot-in-stata-correlation-heat-plot/)

## 安装

```stata
net install gr0099.pkg, all replace 
```

执行上述命令后，如下两份文件会自动下载到当前工作路径下：

```raw
online_supplement.pdf
pheatplot-examples.do
```

你可以使用 `shellout online_supplement.pdf` 命令打开 `online_supplement.pdf` 文件，也可以执行 `clickout` 命令，以便在屏幕上呈现上述文件。



